# AUTO-GENERATED by ninja-codegen â€” DO NOT EDIT
# Re-run `ninjastack sync` to regenerate.
# Data Agent for entity: {{ entity.name }}

from __future__ import annotations

from ninja_core.schema.entity import EntitySchema, FieldSchema, FieldType, StorageEngine


# Entity definition for {{ entity.name }}
{{ entity.name | upper }}_ENTITY = EntitySchema(
    name={{ entity.name | repr }},
    storage_engine={{ entity.storage_engine.value | repr }},
    fields=[
{% for field in entity.fields %}
        FieldSchema(
            name={{ field.name | repr }},
            field_type=FieldType.{{ field.field_type.value }},
{% if field.primary_key %}
            primary_key=True,
{% endif %}
{% if field.nullable %}
            nullable=True,
{% endif %}
{% if field.unique %}
            unique=True,
{% endif %}
{% if field.indexed %}
            indexed=True,
{% endif %}
        ),
{% endfor %}
    ],
{% if entity.description %}
    description={{ entity.description | repr }},
{% endif %}
{% if entity.collection_name %}
    collection_name={{ entity.collection_name | repr }},
{% endif %}
)


def create_{{ entity.name | lower }}_data_agent():
    """Create a DataAgent for {{ entity.name }}.

    Usage:
        from ninja_agents import DataAgent
        agent = DataAgent({{ entity.name | upper }}_ENTITY)
    """
    # Import here to avoid hard dependency on ninja-agents at module level
    from ninja_agents import DataAgent

    return DataAgent({{ entity.name | upper }}_ENTITY)
